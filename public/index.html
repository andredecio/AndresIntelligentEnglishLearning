<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Custom Firebase Auth App: "AI Learning 3"</title>
    <!-- Link to your common/global CSS file -->
    <link rel="stylesheet" href="style.css">
    <!-- Link to your page-specific CSS file for index.html -->
    <link rel="stylesheet" href="index.css">
</head>
<body>

    <h1>Welcome to AI Learning 3!</h1>

    <!-- Authentication Section -->
    <div class="auth-section">
        <h2>Sign In / Sign Up</h2>

        <div id="error-message"></div> <!-- Error message is now initially hidden by index.css -->

        <!-- Email/Password Authentication -->
        <div>
            <h3>Email and Password</h3>
            <input type="email" id="emailInput" placeholder="Email">
            <input type="password" id="passwordInput" placeholder="Password">
            <button id="signInEmailButton">Sign In with Email</button>
            <button id="signUpEmailButton">Sign Up with Email</button>
        </div>

        <hr>

        <!-- Social Authentication -->
        <div>
            <h3>Social Logins</h3>
            <button id="signInGoogleButton" class="social-button google-button">
                <img src="https://img.icons8.com/color/24/000000/google-logo--v1.png" class="social-icon" alt="Google icon"> Sign In with Google
            </button>
            <button id="signInFacebookButton" class="social-button facebook-button">
                <img src="https://img.icons8.com/ios-filled/24/000000/facebook-new.png" class="social-icon" alt="Facebook icon" style="filter: brightness(0) invert(1);"> Sign In with Facebook
            </button>
        </div>

        <hr>

        <!-- Anonymous Authentication -->
        <div>
            <h3>Anonymous</h3>
            <button id="signInAnonymousButton" class="social-button guest-button">Continue as Guest</button>
        </div>
    </div>

    <!-- User Info and Sign Out Section -->
    <div id="auth-status">
        <p>Authentication Status: <span id="statusMessage">Checking...</span></p>
        <p id="loggedInUserEmail" style="font-weight: bold;"></p>
    </div>

    <!-- Sign Out button (hidden by default, shown by JS when logged in) -->
    <button id="signOutButton" class="hidden" style="display: block; margin: 20px auto;">Sign Out</button>

    <!-- Optional: login-info div for displaying detailed user data, currently hidden -->
    <div id="login-info" class="hidden">
        <h2>Login Info:</h2>
        <div id="userInfoDisplay">
            <p><strong>UID:</strong> <span id="userUid"></span></p>
            <p><strong>Email:</strong> <span id="userEmail"></span></p>
            <p><strong>Name:</strong> <span id="userName"></span></p>
            <p><strong>Provider:</strong> <span id="userProvider"></span></p>
        </div>
    </div>

    <!-- Firebase SDKs and auto-init script (as detailed in Step 1) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-functions-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js"></script>
    <script src="/__/firebase/init.js"></script>

    <!-- Your NEW custom modular JavaScript files -->
    <script type="module" src="firebase-services.js"></script>
    <script type="module" src="ui-utilities.js"></script>
    <script type="module" src="common.js"></script> <!-- This handles the global auth redirects, etc. -->

    <!-- Page-specific JavaScript for index.html -->
    <script type="module" src="index.js"></script></body>
</html>
